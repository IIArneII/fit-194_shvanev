#include <iostream>
#include "stdlib.h"
#include "stdio.h"
#include "math.h"
#include "locale"
#include "fstream"
#include "time.h"
using namespace std;

void input(float *a, int n);
void input2(int **a, int n, int m);
void output(float* a, int n);
void output2(int** a, int n, int m);
int maximum(float *a, int n);
int minimum(float* a, int n);
float mean(float* a, int n);
int charct(int** a, int n, int i);

int main()
{
	setlocale(LC_ALL, "Russian");
	srand(time(NULL));

	int choose = -1;
	while (choose != 0)
	{
		cout << endl <<  "Введите номер задания. Чтобы выйти из программы, введите 0: ";
		cin >> choose;

		/*Задание 1.	а: поменять исходный массив, вычитая из каждого элемента среднее значение.
						b: Поменять местами максимальный и первый отрицательный элементы. 
						с: Вычислить среднее значение элементов массива, отбросив минимальный и максимальный элементы.
		*/

		if (choose == 1)
		{
			int n, m;
			float mea, * a;

			cout << "\n\tЗадание 1:" << endl << "Введите количество элементов массива: ";
			cin >> n;
			a = new float[n];
			input(a, n);
			cout << endl << "Первоначальный массив: ";
			output(a, n);
			cout << endl << endl << "Задание a. Вычесть из каждого элемента среднее значение:" << endl;
			mea = mean(a, n);
			cout << "Среднее значение: " << mea << endl;
			for (int i = 0; i < n; i++) a[i] -= mea;
			output(a, n);
			cout << endl << endl << "Задание b. Поменять местами максимальный и первый отрицательный элементы:" << endl;
			m = maximum(a, n);
			for (int i = 0; i < n; i++)
			{
				if (a[i] < 0)
				{
					swap(a[i], a[m]);
					break;
				}
			}
			output(a, n);
			cout << endl << endl << "Задание c. Вычислить среднее значение, отбросив минимальный и максималный элементы:" << endl;
			m = maximum(a, n);
			swap(a[m], a[n - 1]);
			m = minimum(a, n);
			swap(a[m], a[n - 2]);
			mea = mean(a, n - 2);
			cout << "Среднее значение: " << mea << endl;

			/*
			Ввод:		n = 5

			Вывод:		Первоначальный массив: 39  89  26  46  95

						Задание a. Вычесть из каждого элемента среднее значение:
						Среднее значение: 59
						-20  30  -33  -13  36

						Задание b. Поменять местами максимальный и первый отрицательный элементы:
						36  30  -33  -13  -20

						Задание c. Вычислить среднее значение, отбросив минимальный и максималный элементы:
						Среднее значение: -1

			Мой ответ:	массив: 39  89  26  46  95
						
						Задание а. Среднее значение: 59
						Измененный массив: -20  30  -33  -13  36

						Задание b: 36  30  -33  -13  -20

						Задание с: Среднее значение: -1
			*/
		}

		//Задание 2. Характеристика строки - сумма ее положительных четных элементов. Найти номер строки матрицы с максимальной характеристикой

		if (choose == 2)
		{
			int** a, n, m, max = 0, num = 0;

			cout << "\n\tЗадание 2" << endl << "Найти номер строки матрицы с максимальной характеристикой" << endl << "Характеристика строки - сумма ее положительных четных элементов";
			cout << endl << "Введите количество строк матрицы: ";
			cin >> n;
			cout << "Введите количество столбцов матрицы: ";
			cin >> m;
			a = new int* [n];
			for (int i = 0; i < n; i++) a[i] = new int[m];
			input2(a, n, m);
			output2(a, n, m);
			for (int i = 0; i < n; i++)
			{
				if (charct(a, m, i) > max)
				{
					max = charct(a, m, i);
					num = i + 1;
				}
			}
			cout << endl << num << " строка имеет максимальную характеристику, равную " << max << endl;

			/*
			Ввод:	строк 5, столбцов 4

			Вывод: 
					23  -31    8  -37
					39  -71   -3 -100
					36   10  -67   33
					33  -16  -66  -25
					55  -10   14  -35

					3 строка имеет максимальную характеристику, равную 46

			Мой ответ: в 3 строке максимальная характеристика, равная 46
			*/
		}
	}
	return 0;
}

void input(float *a, int n)		//Заполняет одномерный вещественный массив случайными элементами. На вход подаются: массив, количество элементов
{
	for (int i = 0; i < n; i++)
	{
		a[i] = rand() % 100;
	}
}

void output(float* a, int n)	//Выводит на экран одномерный вещественный массив. На вход подаются: массив, количество элементов
{
	for (int i = 0; i < n; i++)
	{
		cout << a[i] << "  ";
	}
}

int maximum(float* a, int n)	//Ищет номер макимального элемента в вещественном массиве. На вход подаются: массив, количество элементов
{
	int m = 0;
	for (int i = 0; i < n; i++)
	{
		if (a[i] >= a[m]) m = i;
	}
	return m;
}

int minimum(float* a, int n)	//Ищет номер минимального элемента в вещественном массиве. На вход подаются: массив, количество элементов
{
	int m = 0;
	for (int i = 0; i < n; i++)
	{
		if (a[i] <= a[m]) m = i;
	}
	return m;
}

float mean(float* a, int n)		//Ищет среднее значение элементов вещественного массива. На вход подаются: массив, количество элементов
{
	float s = 0;
	for (int i = 0; i < n; i++) s = s + a[i];
	s = s / n;
	return s;
}

int charct(int** a, int n, int i)	//Ищет характеристику строки матрицы. Характеристика строки - сумма ее положительных четных элементов.
{									//На вход подаются: матрица, количество столбцов, номер строки, в котрой необходимо найти характеристику
	int s = 0;
	for (int j = 0; j < n; j++) if ((a[i][j] > 0) && (a[i][j] % 2 == 0)) s += a[i][j];
	return s;
}

void input2(int** a, int n, int m)	//Заполняет матрицу случайными элементами. На вход подаются: матрица, количество строк, количество столбцов
{
	for (int i = 0; i < n; i++)
	{
		for (int j = 0; j < m; j++)
		{
			a[i][j] = rand() / 200 - 100;
		}
	}
}

void output2(int** a, int n, int m)	//Выводит матрицу на экран. На вход подаются: матрица, количество строк, количество столбцов
{
	for (int i = 0; i < n; i++)
	{
		for (int j = 0; j < m; j++)
		{
			printf("%5d",a[i][j]);
		}
		cout << endl;
	}
}